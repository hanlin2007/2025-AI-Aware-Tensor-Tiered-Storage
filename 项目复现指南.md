## AAT-TS 智能存储系统项目复现说明书

### 第一步：系统环境检查
在开始部署前，请首先运行环境检查脚本验证系统基础环境。打开终端，进入项目目录，执行以下命令：
```bash
python check_environment.py
```
该脚本将自动检测操作系统版本、Python环境、可用内存和存储空间等基础条件。请确保系统满足以下最低要求：Ubuntu 18.04+ 或 CentOS 7+ 操作系统，Python 3.8+ 版本，至少 4GB 可用内存和 10GB 可用磁盘空间。如果检查过程中发现任何环境问题，请根据脚本输出的提示信息进行修复后再继续下一步。

### 第二步：依赖环境配置
确认基础环境正常后，运行自动化环境配置脚本完成所有依赖组件的安装：
```bash
./setup_environment.sh
```
此脚本将自动执行以下操作：创建并激活 Python 虚拟环境，安装所有必需的 Python 包（包括 redis、minio、fusepy、numpy、matplotlib、PyYAML、torch 等），配置系统服务并设置必要的环境变量。整个安装过程大约需要 5-10 分钟，具体时间取决于网络速度和系统性能。在安装过程中请保持网络连接稳定，如果遇到网络超时问题，脚本会自动重试下载。

### 第三步：依赖完整性验证
环境配置完成后，运行依赖检查脚本来验证所有组件是否正确安装：
```bash
python check_dependencies.py
```
该脚本会详细检查 Redis 客户端、MinIO SDK、FUSE 绑定、数值计算库、可视化库、配置解析器和深度学习框架等所有关键依赖的版本和可用性。请确保所有检查项都显示为绿色通过状态。如果任何依赖项检查失败，脚本会提供具体的错误信息和修复建议，请按照提示重新安装缺失的组件。

### 第四步：存储服务启动
依赖验证通过后，启动演示环境的所有必要服务：
```bash
./start_demo.sh
```
此脚本将按顺序启动以下核心服务：Redis 内存数据库服务（端口 6379），MinIO 对象存储服务（控制台端口 9001，API 端口 9000），FUSE 文件系统挂载到 /mnt/aat 目录。启动过程中脚本会实时显示各服务的状态，请等待所有服务都显示运行正常后再进行下一步操作。如果任何服务启动失败，脚本会提供详细的错误日志和排查建议。

### 第五步：系统功能验证
服务启动完成后，通过以下命令验证系统基本功能：
```bash
ls /mnt/aat
```
您应该能看到完整的虚拟文件系统结构，包括 embedding.bin、layer0.bin、layer1.bin、layer2.bin、layer3.bin、output.bin、config.json、checkpoint.ckpt 等模型文件。如果文件列表显示正常，说明 FUSE 文件系统挂载成功。此时还可以访问 http://localhost:9001 查看 MinIO 管理界面，确认对象存储服务运行状态。

### 第六步：综合测试执行
系统验证通过后，运行完整的性能测试套件：
```bash
python aat_final_test.py
```
该测试将依次执行三个核心场景的评估：在线推理服务性能测试，边缘微调场景成本优化测试，科研环境模型版本管理测试。整个测试过程大约需要 3-5 分钟，测试完成后会自动生成性能报告文件，包括可视化图表、技术分析文档和详细数据文件。测试过程中请勿中断执行，以免影响测试结果的完整性。

### 第七步：测试报告查看
测试完成后，启动报告服务器查看详细的测试结果：
```bash
python simple_server_final.py
```
然后在浏览器中访问 http://localhost:8080 查看完整的测试报告面板。报告页面包含性能图表展示、技术架构分析、效率指标统计和成本效益评估四个主要部分。您可以通过报告页面深入了解系统在不同场景下的表现，包括缓存命中率、预取准确率、响应延迟和存储节省等关键指标。

## 重要注意事项

在整个部署和测试过程中，请特别注意以下事项：所有脚本都需要在类 Unix 系统（Linux 或 macOS）中执行，Windows 系统需要使用 WSL 环境；执行脚本前请确保具有足够的权限，部分操作可能需要 sudo 权限；FUSE 文件系统挂载需要内核支持，如果挂载失败请检查系统是否安装了 FUSE 模块；测试过程中请确保 6379、9000、9001、8080 端口没有被其他程序占用；如果遇到 Redis 或 MinIO 连接问题，请检查相应服务是否正常启动并监听正确端口；所有生成的测试报告文件都会保存在项目根目录下，文件名为时间戳格式，便于区分不同测试轮次的结果。

## 故障排查指引

如果部署过程中遇到问题，请按以下步骤排查：首先检查 check_environment.py 的输出，确认基础环境符合要求；然后查看 setup_environment.sh 的执行日志，确认所有依赖包安装成功；接着验证 check_dependencies.py 的检查结果，确保所有组件都正确配置；如果服务启动失败，检查 start_demo.sh 的详细错误输出；对于 FUSE 挂载问题，可以手动执行 `python aat_fuse_v2.py /mnt/aat` 查看具体错误信息；所有组件的详细日志都可以在项目根目录下的 minio.log 和 fuse.log 文件中找到。如果问题仍然无法解决，请保留完整的终端输出和日志文件以便进一步分析。
